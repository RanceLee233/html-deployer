# V3版本数据库更新指南

## 问题描述
V2版本使用文件系统存储HTML内容，在Vercel无服务器环境中会因为临时文件清理导致HTML文件丢失。

## 解决方案
将HTML内容直接存储到Notion数据库中，解决持久化问题。

## 需要添加的字段

1. **完整HTML内容** (rich_text类型)
   - 用途：存储完整的HTML代码内容
   - 类型：富文本
   - 必需：是

## 更新步骤

### 步骤1：在Notion数据库中添加新字段
1. 打开你的Notion数据库
2. 点击右上角的"..." → "属性"
3. 点击"+ 添加属性"
4. 设置：
   - 名称：完整HTML内容
   - 类型：文本
   - 点击"保存"

### 步骤2：验证更新
运行以下命令检查数据库连接：
```bash
node test-connection.js
```

### 步骤3：测试新功能
1. 部署新的HTML页面
2. 等待一段时间后再次访问
3. 确认页面内容仍然存在

## 向后兼容性
- 保留旧字段用于兼容
- 新代码会自动检测并使用新字段
- 旧页面仍然可以正常访问

## 注意事项
- 无文件系统依赖，完全基于Notion存储
- 解决了Vercel临时文件清理问题
- 所有内容持久保存在Notion中